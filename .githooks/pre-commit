#!/bin/bash

# Pre-commit hook for Python Remove Background Provider
# This hook runs basic CI checks before allowing commits

echo "ğŸ” Running pre-commit checks..."

# Check if we're in the right directory
if [ ! -f "main.py" ]; then
    echo "âŒ Not in the project root directory"
    exit 1
fi

# Run basic linting
echo "Running flake8..."
if command -v flake8 >/dev/null 2>&1; then
    flake8 . --count --select=E9,F63,F7,F82 --show-source --statistics
    if [ $? -ne 0 ]; then
        echo "âŒ Flake8 found critical errors"
        exit 1
    fi
else
    echo "âš ï¸  flake8 not installed, skipping..."
fi

# Run basic tests
echo "Running basic tests..."
if command -v pytest >/dev/null 2>&1; then
    pytest -x -q
    if [ $? -ne 0 ]; then
        echo "âŒ Tests failed"
        exit 1
    fi
else
    echo "âš ï¸  pytest not installed, skipping..."
fi

echo "âœ… Pre-commit checks passed!"
echo "ğŸ’¡ Run 'make ci-all' for comprehensive CI testing before pushing"





